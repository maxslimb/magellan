apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: "org.jetbrains.kotlin.kapt"

android {
  compileSdkVersion Versions.compileSdkVersion

  defaultConfig {
    applicationId "com.wealthfront.magellan.sample"
    minSdkVersion Versions.minSdkVersion
    targetSdkVersion Versions.targetSdkVersion
    versionCode 1
    versionName "1.0"
    testInstrumentationRunner "com.wealthfront.magellan.sample.migration.IntegrationTestRunner"
  }

  compileOptions {
    setSourceCompatibility(JavaVersion.VERSION_17)
    setTargetCompatibility(JavaVersion.VERSION_17)
  }

  buildFeatures {
    viewBinding = true
  }

  testOptions {
    unitTests {
      includeAndroidResources = true
    }
  }

  buildTypes {
    release {
      minifyEnabled false
    }
  }

  kotlinOptions {
    jvmTarget = JavaVersion.VERSION_17
  }

  packagingOptions {
    exclude 'META-INF/LICENSE'
  }

  lintOptions {
    disable 'InvalidPackage','IconDensities', 'ObsoleteLintCustomCheck', 'IconMissingDensityFolder', 'AllowBackup'
  }
  namespace 'com.wealthfront.magellan.sample.migration'
}

dependencies {
  implementation project(':magellan-library')
  implementation project(':magellan-legacy')

  implementation Libs.appCompat
  implementation Libs.dagger
  kapt Libs.daggerCompiler

  implementation Libs.glide
  implementation Libs.retrofit
  implementation Libs.jackson
  implementation Libs.okhttp
  implementation Libs.coroutines
  implementation Libs.coroutinesAndroid
  implementation Libs.jodaTime
  implementation Libs.recyclerView

  kaptTest Libs.daggerCompiler
  testImplementation Libs.junit
  testImplementation Libs.testCore
  testImplementation Libs.mockK
  testImplementation Libs.robolectric
  testImplementation "com.google.truth:truth:1.1.4"

  kaptAndroidTest Libs.daggerCompiler
  androidTestImplementation Libs.extJunit
  androidTestImplementation Libs.espressoCore
  androidTestImplementation Libs.espressoContrib
  androidTestImplementation Libs.testCore
  androidTestImplementation Libs.testCoreKtx
  androidTestImplementation Libs.testRunner
  androidTestImplementation Libs.testRules
  androidTestImplementation Libs.mockitoAndroid

  androidTestImplementation 'androidx.test:runner:1.4.0'
  androidTestUtil 'androidx.test:orchestrator:1.4.1'
}
